<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Тренировочный трекер</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
  header { background: #1E90FF; color: white; padding: 1rem; text-align: center; }
  main { padding: 1rem; }
  select, input, button { margin: 0.5rem 0; padding: 0.5rem; width: 100%; }
  .exercise { background: white; padding: 1rem; margin: 0.5rem 0; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  .exercise h3 { margin-top: 0; }
  .sets { display: flex; flex-wrap: wrap; gap: 0.5rem; }
  .set, .weight-input { flex: 1 1 30%; background: #e0e0e0; padding: 0.5rem; border-radius: 5px; text-align: center; }
  #history { margin-top: 1rem; }
  .history-item { background: #fff; padding: 0.5rem; margin: 0.25rem 0; border-radius: 5px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-size: 0.9rem; }
</style>
</head>
<body>
<header>
  <h1>Тренировочный трекер</h1>
</header>
<main>
  <label for="daySelect">Выбери день:</label>
  <select id="daySelect">
    <option value="1">День 1 — Грудь + Бицепс</option>
    <option value="2">День 2 — Спина + Трицепс</option>
    <option value="3">День 3 — Ноги + Плечи</option>
  </select>

  <div id="exercises"></div>

  <button onclick="saveWorkout()">Сохранить тренировку</button>

  <h3>История тренировок</h3>
  <div id="history"></div>
</main>

<script>
const plan = {
  1: [
    { name: 'Жим лёжа', sets: 4, range: '6-8', weight: 0 },
    { name: 'Жим гантелей на наклонной', sets: 4, range: '8-10', weight: 0 },
    { name: 'Разводки на наклонной / кроссовер', sets: 3, range: '10-12', weight: 0 },
    { name: 'Жим в тренажёре/Хаммер', sets: 3, range: '8-10', weight: 0 },
    { name: 'Отжимания на брусьях', sets: 3, range: '8-12', weight: 0 },
    { name: 'Подъём штанги стоя', sets: 4, range: '6-8', weight: 0 },
    { name: 'Молитвенная/скott', sets: 3, range: '8-10', weight: 0 },
    { name: 'Молотки', sets: 3, range: '10-12', weight: 0 },
  ],
  2: [
    { name: 'Тяга штанги в наклоне', sets: 4, range: '6-8', weight: 0 },
    { name: 'Подтягивания', sets: 4, range: '6-10', weight: 0 },
    { name: 'Тяга вертикального блока', sets: 3, range: '8-10', weight: 0 },
    { name: 'Тяга горизонтального блока', sets: 3, range: '8-12', weight: 0 },
    { name: 'Гиперэкстензии', sets: 3, range: '12-15', weight: 0 },
    { name: 'Жим узким хватом', sets: 4, range: '6-8', weight: 0 },
    { name: 'Разгибание на канате', sets: 3, range: '10-12', weight: 0 },
    { name: 'Французский жим', sets: 3, range: '8-10', weight: 0 },
  ],
  3: [
    { name: 'Присед', sets: 4, range: '6-8', weight: 0 },
    { name: 'Жим ногами', sets: 4, range: '8-10', weight: 0 },
    { name: 'Выпады / болгарские приседания', sets: 3, range: '10', weight: 0 },
    { name: 'Румынская тяга', sets: 3, range: '8-10', weight: 0 },
    { name: 'Сгибание/разгибание ног', sets: 3, range: '12-15', weight: 0 },
    { name: 'Жим над головой', sets: 4, range: '6-8', weight: 0 },
    { name: 'Подъёмы гантелей в стороны', sets: 3, range: '10-12', weight: 0 },
    { name: 'Тяга штанги к подбородку или канат', sets: 3, range: '8-10', weight: 0 },
    { name: 'Задняя дельта (разводка в наклоне)', sets: 3, range: '12-15', weight: 0 },
  ]
};

function renderExercises(day) {
  const container = document.getElementById('exercises');
  container.innerHTML = '';
  plan[day].forEach((ex, i) => {
    const div = document.createElement('div');
    div.className = 'exercise';
    div.innerHTML = `<h3>${ex.name}</h3>`;

    // Ввод веса
    const weightInput = document.createElement('input');
    weightInput.type = 'number';
    weightInput.min = 0;
    weightInput.value = ex.weight;
    weightInput.className = 'weight-input';
    weightInput.placeholder = 'Вес (кг)';
    weightInput.addEventListener('change', () => ex.weight = parseFloat(weightInput.value));
    div.appendChild(weightInput);

    const setsDiv = document.createElement('div');
    setsDiv.className = 'sets';
    for (let s = 0; s < ex.sets; s++) {
      const input = document.createElement('input');
      input.type = 'number';
      input.placeholder = `Подход ${s+1}`;
      input.min = 0;
      input.className = 'set';
      setsDiv.appendChild(input);
    }
    div.appendChild(setsDiv);
    container.appendChild(div);
  });
}

function saveWorkout() {
  const day = document.getElementById('daySelect').value;
  const exercises = document.querySelectorAll('.exercise');
  const result = [];

  exercises.forEach((exDiv, i) => {
    const sets = Array.from(exDiv.querySelectorAll('input.set')).map(inp => parseInt(inp.value) || 0);
    const weight = parseFloat(exDiv.querySelector('input.weight-input').value) || 0;
    plan[day][i].weight = weight;
    result.push({ exercise: plan[day][i].name, sets, weight });

    const upper = parseInt(plan[day][i].range.split('-')[1] || plan[day][i].range);
    if (sets.every(val => val >= upper)) {
      plan[day][i].weight += 2.5;
    }
  });

  const timestamp = new Date().toLocaleString();
  const history = JSON.parse(localStorage.getItem('history') || '[]');
  history.push({ timestamp, day, exercises: result });
  localStorage.setItem('history', JSON.stringify(history));

  alert('Тренировка сохранена и прогресс обновлён!');
  renderExercises(day);
  renderHistory();
}

function renderHistory() {
  const historyDiv = document.getElementById('history');
  const history = JSON.parse(localStorage.getItem('history') || '[]');
  historyDiv.innerHTML = '';
  history.slice(-10).reverse().forEach(item => {
    const div = document.createElement('div');
    div.className = 'history-item';
    div.innerHTML = `<strong>${item.timestamp}</strong> — День ${item.day}<br>` +
      item.exercises.map(ex => `${ex.exercise}: ${ex.sets.join(', ')} (Вес: ${ex.weight} кг)`).join('<br>');
    historyDiv.appendChild(div);
  });
}

document.getElementById('daySelect').addEventListener('change', (e) => renderExercises(e.target.value));
renderExercises(1);
renderHistory();
</script>
</body>
</html>
