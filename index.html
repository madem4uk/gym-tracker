<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–¢—Ä–µ–∫–µ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}
</script>

<style>
body { font-family: -apple-system, Inter, sans-serif; margin:0; background:#111; color:#eee; }
.container { padding:16px; }
select, input, button {
  width:100%; padding:12px; margin:6px 0;
  border:none; border-radius:10px; font-size:16px;
}
input, select { background:#222; color:#eee; }
button { background:#4caf50; color:#fff; font-weight:600; }
button:active { background:#3e9242; }

.card { background:#1b1b1b; padding:14px; border-radius:12px; margin-top:12px; }
table { width:100%; border-collapse:collapse; margin-top:16px; font-size:14px; }
th, td { border:1px solid #333; padding:6px; text-align:center; }
th { background:#222; }
tr:nth-child(even) { background:#161616; }
</style>
</head>
<body>
<div class="container">
<h2>üèãÔ∏è –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>

<div class="card">
<label>–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏:</label>
<select id="day">
  <option value="1">–ü–æ–Ω ‚Äî –ì—Ä—É–¥—å/–ë–∏—Ü–µ–ø—Å</option>
  <option value="2">–°—Ä ‚Äî –°–ø–∏–Ω–∞/–¢—Ä–∏—Ü–µ–ø—Å</option>
  <option value="3">–ü—Ç ‚Äî –ù–æ–≥–∏/–ü–ª–µ—á–∏</option>
</select>

<label>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:</label>
<select id="exercise"></select>

<label>–í–µ—Å (–∫–≥):</label>
<input id="weight" type="number">

<label>–ü–æ–≤—Ç–æ—Ä—ã:</label>
<input id="reps" type="number">

<label>–ú–∞–∫—Å –ø–æ–≤—Ç–æ—Ä–æ–≤:</label>
<input id="maxReps" type="number">

<button onclick="add()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>

<h3>üìÖ –ò—Å—Ç–æ—Ä–∏—è</h3>
<table id="log">
<tr><th>–î–µ–Ω—å</th><th>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</th><th>–í–µ—Å</th><th>–ü–æ–≤—Ç–æ—Ä—ã</th><th>–°–æ–≤–µ—Ç</th></tr>
</table>
</div>

<script>
// —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ –¥–Ω—è–º
let plan = {
  1:["–ñ–∏–º –ª—ë–∂–∞","–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π","–†–∞–∑–≤–æ–¥–∫–∏","–ö—Ä–æ—Å—Å–æ–≤–µ—Ä","–ü–æ–¥—ä—ë–º —à—Ç–∞–Ω–≥–∏","–°–∫–æ—Ç—Ç","–ú–æ–ª–æ—Ç–∫–∏"],
  2:["–¢—è–≥–∞ —à—Ç–∞–Ω–≥–∏","–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è","–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Ç—è–≥–∞","–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç—è–≥–∞","–£–∑–∫–∏–π –∂–∏–º","–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π","–ö–∞–Ω–∞—Ç"],
  3:["–ü—Ä–∏—Å–µ–¥","–ñ–∏–º –Ω–æ–≥–∞–º–∏","–í—ã–ø–∞–¥—ã","–†—É–º—ã–Ω—Å–∫–∞—è —Ç—è–≥–∞","–†–∞–∑–≥–∏–±–∞–Ω–∏–µ –Ω–æ–≥","–ñ–∏–º –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π","–†–∞–∑–≤–µ–¥–µ–Ω–∏—è"]
};

// —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –≤–µ—Å–∞
let defaultWeights = {};
Object.values(plan).flat().forEach(n=>defaultWeights[n]=defaultWeights[n]||20);

// –¥–∞–Ω–Ω—ã–µ
let data = JSON.parse(localStorage.getItem('log')||'[]');

const daySel=document.getElementById('day');
const exerciseSel=document.getElementById('exercise');
const weight=document.getElementById('weight');
const maxReps=document.getElementById('maxReps');
const reps=document.getElementById('reps');

function loadExercises(){
  exerciseSel.innerHTML="";
  plan[daySel.value].forEach(e=>exerciseSel.innerHTML+=`<option>${e}</option>`);
  weight.value = defaultWeights[exerciseSel.value];
  maxReps.value = 8;
}
exerciseSel.addEventListener('change',()=> weight.value = defaultWeights[exerciseSel.value]);
daySel.addEventListener('change',loadExercises);
loadExercises();

function render(){
  const table=document.getElementById('log');
  table.innerHTML='<tr><th>–î–µ–Ω—å</th><th>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</th><th>–í–µ—Å</th><th>–ü–æ–≤—Ç–æ—Ä—ã</th><th>–°–æ–≤–µ—Ç</th></tr>';
  data.slice().reverse().forEach(x=>{
    table.innerHTML+=`<tr><td>${x.d}</td><td>${x.e}</td><td>${x.w}</td><td>${x.r}</td><td>${x.msg}</td></tr>`;
  });
}

function add() {
  const d = daySel.options[daySel.selectedIndex].textContent;
  const e = exerciseSel.value;
  const w = Number(weight.value);
  const r = Number(reps.value);
  const m = Number(maxReps.value);

  let msg = "–û—Å—Ç–∞–≤–∏—Ç—å –≤–µ—Å";
  if (r >= m) {
    const add = e.toLowerCase().includes("–≥–∞–Ω—Ç") ? 2 : 2.5;
    msg = `+${add} –∫–≥ –≤ —Å–ª–µ–¥. —Ä–∞–∑`;
    defaultWeights[e] = w + add;
  } else {
    defaultWeights[e] = w;
  }

  data.push({d,e,w,r,msg});
  localStorage.setItem('log',JSON.stringify(data));
  render();
}

render();
</script>
</body>
</html>
